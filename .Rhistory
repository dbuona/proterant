q+facet_wrap(~species)
#l75
q<-ggplot(df3, aes(x=year, y=count)) + geom_point( col="green")
q+facet_wrap(~species)
#fbb
q<-ggplot(df4, aes(x=year, y=count)) + geom_point(col="pink")
q+facet_wrap(~species)
#fopn
q<-ggplot(df5, aes(x=year, y=count)) + geom_point(col="red")
q+facet_wrap(~species)
###is count in each year significantly different? mean and sd
bb<-df2 %>% group_by(species) %>% summarise(mean(count), sd(count))
l75<-df3 %>% group_by(species) %>% summarise(mean(count), sd(count))
fbb<-df4 %>% group_by(species) %>% summarise(mean(count), sd(count))
fopn<-df5 %>% group_by(species) %>% summarise(mean(count), sd(count))
bb
l75
fbb
fopn
###Things to consider:
#Pattern 1: 1 phenophase considerably more varlaible over time suggest different cues but could also by likely hood to accumulate gdds later in the season
#Pattern 2: if tempurature is main cue, GDD shoudl be minimally varaible. compare varience over time between phenophases within species
#trouble shooting outliers
troubleshoot<-filter(df3,year=="2001")
trouble<-filter(hf,year=="2001")
rm(list=ls()) # remove everything currently held in the R memory
options(stringsAsFactors=FALSE)
graphics.off()
setwd("~/Documents/git/proterant")
hf<- read.csv("data/WeatherData.csv", header=TRUE)
d<-read.csv("data/hf003-06-mean-spp.csv",header=TRUE)
sub<-filter(hf,Year=="2001")
# Harvard Forest
# To double check my script is accurate
hf<- filter(hf, Site == "hf")
hf$gdd <- hf$AirT - 5
hf$gdd <-ifelse(hf$gdd>0, hf$gdd, 0)
hf$gdd <-ifelse(!is.na(hf$gdd), hf$gdd, 0) #added by dan-this is the problem line
rm(list=ls()) # remove everything currently held in the R memory
options(stringsAsFactors=FALSE)
graphics.off()
setwd("~/Documents/git/proterant")
hf<- read.csv("data/WeatherData.csv", header=TRUE)
d<-read.csv("data/hf003-06-mean-spp.csv",header=TRUE)
hf<- filter(hf, Site == "hf")
View(hf)
hf<- read.csv("data/WeatherData.csv", header=TRUE)
d<-read.csv("data/hf003-06-mean-spp.csv",header=TRUE)
sub<-filter(hf,Year=="2001")
#hf<- filter(hf, Site == "hf")
hf$gdd <- hf$AirT - 5
hf$gdd <-ifelse(hf$gdd>0, hf$gdd, 0)
hf$gdd <-ifelse(!is.na(hf$gdd), hf$gdd, 0) #added by dan-this is the problem line
hf$count <- ave(
hf$gdd, hf$Year,
hf<- read.csv("data/WeatherData.csv", header=TRUE)
d<-read.csv("data/hf003-06-mean-spp.csv",header=TRUE)
sub<-filter(hf,Year=="2001")
View(hf)
hf<- read.csv("data/WeatherData.csv", header=TRUE)
d<-read.csv("data/hf003-06-mean-spp.csv",header=TRUE)
sub<-filter(hf,Year=="2001")
names(hf)
rm(list=ls()) # remove everything currently held in the R memory
options(stringsAsFactors=FALSE)
graphics.off()
library(dplyr)
library(tidyr)
library(ggplot2)
library(lubridate)
setwd("~/Documents/git/proterant")
hf<- read.csv("data/WeatherData.csv", header=TRUE)
d<-read.csv("data/hf003-06-mean-spp.csv",header=TRUE)
names(hf)
sub<-filter(hf,Year=="2001")
distinct(sub)
distinct(sub,JD)
sub<-distinct(sub,JD)
sub<-filter(hf,Year=="2001")
sub<-distinct(sub,Date)
hf<-distinct(hf,Date)
d<-read.csv("data/hf003-06-mean-spp.csv",header=TRUE)
###removing duplicates trial
#sub<-filter(hf,Year=="2001")
#sub<-distinct(sub,Date)
# Harvard Forest
# To double check my script is accurate
#hf<- filter(hf, Site == "hf")
hf$gdd <- hf$AirT - 5
hf$gdd <-ifelse(hf$gdd>0, hf$gdd, 0)
hf$gdd <-ifelse(!is.na(hf$gdd), hf$gdd, 0) #added by dan-this is the problem line
hf$count <- ave(
hf$gdd, hf$Year,
FUN=function(x) cumsum(c(0, head(x, -1)))
)
hf<-filter(hf,Year>=1990)
# Clean up dataframes and join
hf<-rename(hf, year=Year)
d<-d%>%
dplyr::select(year,species, bb.jd,l75.jd,fbb.jd,fopn.jd)
d<- as.data.frame(rapply(object = d, f = round, classes = "numeric", how = "replace", digits = 0))
df<-left_join(hf, d)
###species with enough values (from below)
df<-filter(df, species %in% c( "ACPE","ACRU", "ACSA","BEAL","FRAM","QURU"))
##make subset for each phenophase
###budburst
df2<-df%>%
dplyr::select(year,species, JD, bb.jd, count) %>%
filter(year>=1990)
df2$day<- ifelse(df2$JD==df2$bb.jd,df2$JD,NA)
df2<-na.omit(df2)
###l75
df3<-df%>%
dplyr::select(year,species, JD,l75.jd, count) %>%
filter(year>=1990)
df3$day<- ifelse(df3$JD==df3$l75.jd,df3$JD,NA)
df3<-na.omit(df3)
### fbb.jd
hf<-rename(hf, year=Year)
View(hf)
hf<- read.csv("data/WeatherData.csv", header=TRUE)
hf<-distinct(hf$Date)
hf<-filter(hf,Date==distinct(Date))
hf<-filter(hf,distinct(Date))
hf<- unique(hf$Date)
hf<- read.csv("data/WeatherData.csv", header=TRUE)
distinct_df = hf %>% distinct(Date) %>% select(Date)
View(d)
View(distinct_df)
distinct_vector = distinct_df$Date
distinct_df = hf %>% distinct(Date)
View(hf)
View(distinct_df)
distinct_df = hf %>% distinct(Date),.keep_all = TRUE)
distinct_df<-distinct(hf,Date,keep_all = TRUE)
View(distinct_df)
distinct_df<-distinct(hf,Date,.keep_all = TRUE)
View(distinct_df)
hf<- read.csv("data/WeatherData.csv", header=TRUE)
hf<-distinct(hf,Date,.keep_all = TRUE)
hf<- read.csv("data/WeatherData.csv", header=TRUE)
hf<-distinct(hf,Date,.keep_all = TRUE)
d<-read.csv("data/hf003-06-mean-spp.csv",header=TRUE)
###removing duplicates trial
#sub<-filter(hf,Year=="2001")
#sub<-distinct(sub,Date)
# Harvard Forest
# To double check my script is accurate
#hf<- filter(hf, Site == "hf")
hf$gdd <- hf$AirT - 5
hf$gdd <-ifelse(hf$gdd>0, hf$gdd, 0)
hf$gdd <-ifelse(!is.na(hf$gdd), hf$gdd, 0) #added by dan-this is the problem line
hf$count <- ave(
hf$gdd, hf$Year,
FUN=function(x) cumsum(c(0, head(x, -1)))
)
hf<-filter(hf,Year>=1990)
# Clean up dataframes and join
hf<-rename(hf, year=Year)
d<-d%>%
dplyr::select(year,species, bb.jd,l75.jd,fbb.jd,fopn.jd)
d<- as.data.frame(rapply(object = d, f = round, classes = "numeric", how = "replace", digits = 0))
df<-left_join(hf, d)
###species with enough values (from below)
df<-filter(df, species %in% c( "ACPE","ACRU", "ACSA","BEAL","FRAM","QURU"))
##make subset for each phenophase
###budburst
df2<-df%>%
dplyr::select(year,species, JD, bb.jd, count) %>%
filter(year>=1990)
df2$day<- ifelse(df2$JD==df2$bb.jd,df2$JD,NA)
df2<-na.omit(df2)
###l75
df3<-df%>%
dplyr::select(year,species, JD,l75.jd, count) %>%
filter(year>=1990)
df3$day<- ifelse(df3$JD==df3$l75.jd,df3$JD,NA)
df3<-na.omit(df3)
### fbb.jd
df4<-df%>%
dplyr::select(year,species, JD, fbb.jd, count) %>%
filter(year>=1990)
df4$day<- ifelse(df4$JD==df4$fbb.jd,df4$JD,NA)
df4<-na.omit(df4)
##flowers open
df5<-df%>%
dplyr::select(year,species, JD,fopn.jd, count) %>%
filter(year>=1990)
df5$day<- ifelse(df5$JD==df5$fopn.jd,df5$JD,NA)
df5<-na.omit(df5)
#plots
#bb
q<-ggplot(df2, aes(x=year, y=count)) + geom_point()
q+facet_wrap(~species)
#l75
q<-ggplot(df3, aes(x=year, y=count)) + geom_point( col="green")
q+facet_wrap(~species)
#fbb
q<-ggplot(df4, aes(x=year, y=count)) + geom_point(col="pink")
q+facet_wrap(~species)
#fopn
q<-ggplot(df5, aes(x=year, y=count)) + geom_point(col="red")
q+facet_wrap(~species)
###is count in each year significantly different? mean and sd
bb<-df2 %>% group_by(species) %>% summarise(mean(count), sd(count))
l75<-df3 %>% group_by(species) %>% summarise(mean(count), sd(count))
fbb<-df4 %>% group_by(species) %>% summarise(mean(count), sd(count))
fopn<-df5 %>% group_by(species) %>% summarise(mean(count), sd(count))
bb
l75
fbb
fopn
###Things to consider:
#Pattern 1: 1 phenophase considerably more varlaible over time suggest different cues but could also by likely hood to accumulate gdds later in the season
#Pattern 2: if tempurature is main cue, GDD shoudl be minimally varaible. compare varience over time between phenophases within species
#trouble shooting outliers
troubleshoot<-filter(df3,year=="2001")
trouble<-filter(hf,year=="2001")
bb<-transmute(bb, vary = sd/mean)
bb<-mutate(bb, vary = sd/mean)
bb<-mutate(bb, vary = "sd"/"mean")
View(bb)
bb<-mutate(bb, vary = sd(count)/mean(count))
View(df2)
bb<-mutate(bb, vary = "sd(count)"/"mean(count)")
as.data.frame(bb)
bb<-mutate(bb, vary = sd(count)/mean(count))
bb$mean(count)<-bb$meanleafbud
View(bb)
colnames(bb) <- c("species","meanbudbust", "sdbudburst")
View(bb)
mutate(bb,vary= sdbudburst/meanbudbust)
mutate(bb,varybb= sdbudburst/meanbudbust)
colnames(bb) <- c("species","meanbudbust", "sdbudburst")
colnames(l75) <- c("species","meanl75", "sdl75")
colnames(fbb) <- c("species","meanfbb", "sdfbb")
colnames(fopn) <- c("species","meanfopn", "sdfopn")
burst<-mutate(bb,varybb= sdl75/meanl75)
leaf<-mutate(l75,varyl75= sdl75/meanl75)
burst<-mutate(bb,varybb= sdbb/meanbb)
colnames(bb) <- c("species","meanbb", "sdbb")
colnames(l75) <- c("species","meanl75", "sdl75")
colnames(fbb) <- c("species","meanfbb", "sdfbb")
colnames(fopn) <- c("species","meanfopn", "sdfopn")
burst<-mutate(bb,varybb= sdbb/meanbb)
leaf<-mutate(l75,varyl75= sdl75/meanl75)
fburst<-mutate(fbb,varyfbb= sdfbb/meanfbb)
flower<-leaf<-mutate(fopn,varyfopn= sdfopn/meanfopn)
burst
fburst
leaf
flower
## 8 March 2017
# GDD Script and Budburst for HF
# Aim: To find the average accumulated growing degree days for Harvard Forest till budburst
# using John O'Keefe's data
# Clear workspace
rm(list=ls()) # remove everything currently held in the R memory
options(stringsAsFactors=FALSE)
graphics.off()
library(dplyr)
library(tidyr)
library(ggplot2)
library(lubridate)
setwd("~/Documents/git/proterant")
hf<- read.csv("data/WeatherData.csv", header=TRUE)
hf<-distinct(hf,Date,.keep_all = TRUE)
d<-read.csv("data/hf003-06-mean-spp.csv",header=TRUE)
###removing duplicates trial
#sub<-filter(hf,Year=="2001")
#sub<-distinct(sub,Date)
# Harvard Forest
# To double check my script is accurate
#hf<- filter(hf, Site == "hf")
hf$gdd <- hf$AirT - 5
hf$gdd <-ifelse(hf$gdd>0, hf$gdd, 0)
hf$gdd <-ifelse(!is.na(hf$gdd), hf$gdd, 0) #added by dan-this is the problem line
hf$count <- ave(
hf$gdd, hf$Year,
FUN=function(x) cumsum(c(0, head(x, -1)))
)
hf<-filter(hf,Year>=1990)
# Clean up dataframes and join
hf<-rename(hf, year=Year)
d<-d%>%
dplyr::select(year,species, bb.jd,l75.jd,fbb.jd,fopn.jd)
d<- as.data.frame(rapply(object = d, f = round, classes = "numeric", how = "replace", digits = 0))
df<-left_join(hf, d)
###species with enough values (from below)
df<-filter(df, species %in% c( "ACPE","ACRU", "ACSA","BEAL","FRAM","QURU"))
##make subset for each phenophase
###budburst
df2<-df%>%
dplyr::select(year,species, JD, bb.jd, count) %>%
filter(year>=1990)
df2$day<- ifelse(df2$JD==df2$bb.jd,df2$JD,NA)
df2<-na.omit(df2)
###l75
df3<-df%>%
dplyr::select(year,species, JD,l75.jd, count) %>%
filter(year>=1990)
df3$day<- ifelse(df3$JD==df3$l75.jd,df3$JD,NA)
df3<-na.omit(df3)
### fbb.jd
df4<-df%>%
dplyr::select(year,species, JD, fbb.jd, count) %>%
filter(year>=1990)
df4$day<- ifelse(df4$JD==df4$fbb.jd,df4$JD,NA)
df4<-na.omit(df4)
##flowers open
df5<-df%>%
dplyr::select(year,species, JD,fopn.jd, count) %>%
filter(year>=1990)
df5$day<- ifelse(df5$JD==df5$fopn.jd,df5$JD,NA)
df5<-na.omit(df5)
#plots
#bb
q<-ggplot(df2, aes(x=year, y=count)) + geom_point()
q+facet_wrap(~species)
#l75
q<-ggplot(df3, aes(x=year, y=count)) + geom_point( col="green")
q+facet_wrap(~species)
#fbb
q<-ggplot(df4, aes(x=year, y=count)) + geom_point(col="pink")
q+facet_wrap(~species)
#fopn
q<-ggplot(df5, aes(x=year, y=count)) + geom_point(col="red")
q+facet_wrap(~species)
###is count in each year significantly different? mean and sd
bb<-df2 %>% group_by(species) %>% summarise(mean(count), sd(count))
l75<-df3 %>% group_by(species) %>% summarise(mean(count), sd(count))
fbb<-df4 %>% group_by(species) %>% summarise(mean(count), sd(count))
fopn<-df5 %>% group_by(species) %>% summarise(mean(count), sd(count))
colnames(bb) <- c("species","meanbb", "sdbb")
colnames(l75) <- c("species","meanl75", "sdl75")
colnames(fbb) <- c("species","meanfbb", "sdfbb")
colnames(fopn) <- c("species","meanfopn", "sdfopn")
burst<-mutate(bb,varybb= sdbb/meanbb)
leaf<-mutate(l75,varyl75= sdl75/meanl75)
fburst<-mutate(fbb,varyfbb= sdfbb/meanfbb)
flower<-leaf<-mutate(fopn,varyfopn= sdfopn/meanfopn)
View(leaf)
burst<-mutate(bb,varybb= sdbb/meanbb)
leaf<-mutate(l75,varyl75= sdl75/meanl75)
fburst<-mutate(fbb,varyfbb= sdfbb/meanfbb)
flower<-mutate(fopn,varyfopn= sdfopn/meanfopn)
burst
fburst
leaf
flower
aov(leaf$varyl75~flower$varyfopn)
compare<-aov(leaf$varyl75~flower$varyfopn)
summary(compare)
compare<-aov(burst$varybb~flower$varyfopn)
summary(compare)
compare<-aov(burst$varybb~fburst$varyfbb)
summary(compare)
compare<-anova(burst$varybb~fburst$varyfbb)
compare<-Anova(burst$varybb~fburst$varyfbb)
compare<-aov(burst$varybb~fburst$varyfbb)
summary(compare)
compare<-aov(burst$varybb~fburst$varyfbb+species)
rm(list=ls()) # remove everything currently held in the R memory
options(stringsAsFactors=FALSE)
graphics.off()
library(dplyr)
library(tidyr)
library(ggplot2)
library(lubridate)
setwd("~/Documents/git/proterant")
hf<- read.csv("data/WeatherData.csv", header=TRUE)
hf<-distinct(hf,Date,.keep_all = TRUE)
d<-read.csv("data/hf003-05-mean-ind.csv",header=TRUE)
hf$gdd <- hf$AirT - 5
hf$gdd <-ifelse(hf$gdd>0, hf$gdd, 0)
hf$gdd <-ifelse(!is.na(hf$gdd), hf$gdd, 0) #added by dan-this is the problem line
hf$count <- ave(
hf$gdd, hf$Year,
FUN=function(x) cumsum(c(0, head(x, -1)))
)
hf<-filter(hf,Year>=1990)
d<-d%>%
dplyr::select(year,species, bb.jd,l75.jd,fbb.jd,fopn.jd)
d<- as.data.frame(rapply(object = d, f = round, classes = "numeric", how = "replace", digits = 0))
df<-left_join(hf, d)
hf<-rename(hf, year=Year)
d<-d%>%
dplyr::select(year,species, bb.jd,l75.jd,fbb.jd,fopn.jd)
d<- as.data.frame(rapply(object = d, f = round, classes = "numeric", how = "replace", digits = 0))
df<-left_join(hf, d)
View(df)
View(df)
View(d)
###for indv species
rm(list=ls()) # remove everything currently held in the R memory
options(stringsAsFactors=FALSE)
graphics.off()
library(dplyr)
library(tidyr)
library(ggplot2)
library(lubridate)
setwd("~/Documents/git/proterant")
hf<- read.csv("data/WeatherData.csv", header=TRUE)
hf<-distinct(hf,Date,.keep_all = TRUE)
d<-read.csv("data/hf003-05-mean-ind.csv",header=TRUE)
View(d)
hf<-rename(hf, year=Year)
#d<-d%>%
# dplyr::select(year,species, bb.jd,l75.jd,fbb.jd,fopn.jd)
d<- as.data.frame(rapply(object = d, f = round, classes = "numeric", how = "replace", digits = 0))
df<-left_join(hf, d)
View(df)
## 8 March 2017
# GDD Script and Budburst for HF
# Aim: To find the average accumulated growing degree days for Harvard Forest till budburst
# using John O'Keefe's data
# Clear workspace
rm(list=ls()) # remove everything currently held in the R memory
options(stringsAsFactors=FALSE)
graphics.off()
library(dplyr)
library(tidyr)
library(ggplot2)
library(lubridate)
setwd("~/Documents/git/proterant")
hf<- read.csv("data/WeatherData.csv", header=TRUE)
hf<-distinct(hf,Date,.keep_all = TRUE)
d<-read.csv("data/hf003-06-mean-spp.csv",header=TRUE)
###removing duplicates trial
#sub<-filter(hf,Year=="2001")
#sub<-distinct(sub,Date)
# Harvard Forest
# To double check my script is accurate
#hf<- filter(hf, Site == "hf")
hf$gdd <- hf$AirT - 5
hf$gdd <-ifelse(hf$gdd>0, hf$gdd, 0)
hf$gdd <-ifelse(!is.na(hf$gdd), hf$gdd, 0) #added by dan-this is the problem line
hf$count <- ave(
hf$gdd, hf$Year,
FUN=function(x) cumsum(c(0, head(x, -1)))
)
hf<-filter(hf,Year>=1990)
# Clean up dataframes and join
hf<-rename(hf, year=Year)
#d<-d%>%
# dplyr::select(year,species, bb.jd,l75.jd,fbb.jd,fopn.jd)
d<- as.data.frame(rapply(object = d, f = round, classes = "numeric", how = "replace", digits = 0))
df<-left_join(hf, d)
View(df)
## 8 March 2017
# GDD Script and Budburst for HF
# Aim: To find the average accumulated growing degree days for Harvard Forest till budburst
# using John O'Keefe's data
# Clear workspace
rm(list=ls()) # remove everything currently held in the R memory
options(stringsAsFactors=FALSE)
graphics.off()
library(dplyr)
library(tidyr)
library(ggplot2)
library(lubridate)
setwd("~/Documents/git/proterant")
hf<- read.csv("data/WeatherData.csv", header=TRUE)
hf<-distinct(hf,Date,.keep_all = TRUE)
d<-read.csv("data/hf003-06-mean-spp.csv",header=TRUE)
View(d)
d<-read.csv("data/hf003-05-mean-ind.csv",header=TRUE)
View(d)
###for indv species
rm(list=ls()) # remove everything currently held in the R memory
options(stringsAsFactors=FALSE)
graphics.off()
library(dplyr)
library(tidyr)
library(ggplot2)
library(lubridate)
setwd("~/Documents/git/proterant")
hf<- read.csv("data/WeatherData.csv", header=TRUE)
hf<-distinct(hf,Date,.keep_all = TRUE)
d<-read.csv("data/hf003-05-mean-ind.csv",header=TRUE)
hf$gdd <- hf$AirT - 5
hf$gdd <-ifelse(hf$gdd>0, hf$gdd, 0)
hf$gdd <-ifelse(!is.na(hf$gdd), hf$gdd, 0) #added by dan-this is the problem line
hf$count <- ave(
hf$gdd, hf$Year,
FUN=function(x) cumsum(c(0, head(x, -1)))
)
hf<-filter(hf,Year>=1990)
View(d)
hf<-filter(hf,Year>=1990)
###mergine datasets
hf<-rename(hf, year=Year)
#d<-d%>%
#dplyr::select(year,species, bb.jd,l75.jd,fbb.jd,fopn.jd)
d<- as.data.frame(rapply(object = d, f = round, classes = "numeric", how = "replace", digits = 0))
df<-left_join(hf, d)
View(df)
df2<-df%>%
dplyr::select(year,species, JD, bb.jd, trea.id,count) %>%
filter(year>=1990)
df2$day<- ifelse(df2$JD==df2$bb.jd,df2$JD,NA)
df2<-df%>%
dplyr::select(year,species, JD, bb.jd, trea.id,count) %>%
filter(year>=1990)
dplyr::select(year,species, JD, bb.jd, tree.id,count) %>%
filter(year>=1990)
df2<-df%>%
dplyr::select(year,species, JD, bb.jd, tree.id,count) %>%
filter(year>=1990)
df2$day<- ifelse(df2$JD==df2$bb.jd,df2$JD,NA)
df2<-na.omit(df2)
View(df2)
